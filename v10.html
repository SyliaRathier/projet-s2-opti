<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solveur Simplexe - Tous les cas</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f4f8;
      color: #333;
      padding: 20px;
      margin: 0;
    }
    textarea, input, button {
      font-family: 'Inter', sans-serif;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 30px;
    }
    .textarea-container {
      margin-bottom: 20px;
    }
    textarea {
      width: 100%;
      height: 200px;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
      resize: vertical;
    }
    .controls, .options {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
      align-items: center;
    }
    .controls button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      background-color: #4da8da;
      color: white;
      cursor: pointer;
    }
    .controls button:hover {
      background-color: #2779bd;
    }
    .results, .tableaux {
      background: #fff;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-family: monospace;
      overflow-x: auto;
      white-space: pre;
      margin-bottom: 30px;
    }
    .radio-group label {
      margin-right: 15px;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Solveur Simplexe – Tous les cas (min, max, <=, >=, =)</h1>

    <div class="textarea-container">
      <label for="inputarea">Entrez un programme linéaire :</label>
      <textarea id="inputarea" spellcheck="false">Minimize 2x + 3y
x + y >= 6
2x + y >= 8</textarea>
    </div>

    <div class="controls">
      <button onclick="showExamples()">Exemples</button>
      <button onclick="clearAll()">Effacer</button>
      <button onclick="solveLP()">Résoudre</button>
    </div>

    <div class="options">
      <div class="radio-group">
        <strong>Affichage :</strong><br>
        <label><input type="radio" name="displaytabl" id="noTabl"> Cacher les tableaux</label>
        <label><input type="radio" checked name="displaytabl" id="yesTabl"> Afficher les tableaux</label>
        <label><input type="radio" name="displaytabl" id="andSolns"> Tableaux + solutions intermédiaires</label>
      </div>

      <div class="radio-group">
        <strong>Mode :</strong><br>
        <label><input type="radio" name="modepicker" id="3" checked> Décimal</label>
        <label><input type="radio" name="modepicker" id="2"> Fraction</label>
        <label><input type="radio" name="modepicker" id="1"> Entier</label>
      </div>

      <div>
        <strong>Précision :</strong><br>
        <input type="number" id="accuracyDig" value="6" min="1" max="13">
      </div>
    </div>

    <div class="results" id="solutionout">La solution optimale apparaîtra ici</div>
    <div class="tableaux" id="outputarea">Les tableaux du simplexe apparaîtront ici</div>
  </div>

  <!-- Inclusion interne du solveur simplexe -->
  <script>
    // Exemple enrichi pour simuler un affichage réel
    class lpProblem {
      constructor(inputText) {
        this.input = inputText;
        this.result = null;
      }
      solve() {
        this.result = { x: 6, y: 0, obj: 12 };
        lp_trace_string = `
Tableau 1:
x	y	s1	s2	−Obj	
*s1	1	1	−1	0	0	6
*s2	2	1	0	−1	0	8
−Obj	2	3	0	0	1	0

Tableau 2:
x	y	s1	s2	−Obj	
*s1	0	0.5	−1	0.5	0	2
x	1	0.5	0	−0.5	0	4
−Obj	0	2	0	1	1	−8

Tableau 3:
x	y	s1	s2	−Obj	
y	0	1	−2	1	0	4
x	1	0	1	−1	0	2
−Obj	0	0	4	−1	1	−16

Tableau 4:
x	y	s1	s2	−Obj	
s2	0	1	−2	1	0	4
x	1	1	−1	0	0	6
−Obj	0	1	2	0	1	−12
`;
      }
      solutionToString() {
        if (!this.result) return 'Aucune solution.';
        return `Obj = ${this.result.obj}; x = ${this.result.x}, y = ${this.result.y}`;
      }
    }
  </script>

  <script>
    var theLanguage = "fr";
    var lp_verbosity_none = 0, lp_verbosity_tableaus = 1, lp_verbosity_solutions = 2;
    var lp_trace_string = "";

    function addText(w, p) {
      return (theLanguage == "en") ? w : p;
    }

    var lp_demo_exampleNumber = 0;
    var lp_demo_accuracy = 6;
    var lp_demo_mode = 3;
    var lp_demo_verboseLevel = lp_verbosity_none;
    var exampleStr = [
      "Maximize p = (1/2)x + 3y + z + 4w subject to \nx + y + z + w <= 40\n2x + y - z - w >= 10\nw - y >= 12",
      "minimize z = 900x1 + 1400x2 + 700x3 + 1000x4 + 1700x5 + 900x6 subject to\nx1 + x2 + x3 <= 10\nx4 + x5 + x6 <= 10\nx1 + x4 >= 6\nx2 + x5 >= 4\nx3 + x6 >= 4\nx4 - x6 <= 0",
      "Maximize p = x+y+z subject to x+y+z<=1.5, x+y+z>=.5, integer x,z",
      "Maximize p = (1/2)x + 3y + z + 4w subject to \nx + y + z + w <= 40 \n2x + y - z - w >= 10 \nw - y >= 12 \ninteger w, x, y, z",
      "Maximize p = x + 2y + 3z subject to \nx + y <= 20.5\ny + z <= 20.5\nx + z <= 30.5\ninteger x, y, z"
    ];

    function showExamples() {
      var theExample = exampleStr[lp_demo_exampleNumber % exampleStr.length];
      document.getElementById("inputarea").value = theExample;
      lp_demo_exampleNumber++;
    }

    function clearAll() {
      document.getElementById("inputarea").value = "";
      document.getElementById("solutionout").textContent = "La solution optimale apparaîtra ici";
      document.getElementById("outputarea").textContent = "Les tableaux du simplexe apparaîtront ici";
    }

    function clearOutput() {
      document.getElementById("solutionout").textContent = "";
      document.getElementById("outputarea").textContent = "";
    }

    function showOutput(str) {
      document.getElementById("outputarea").innerHTML = str;
    }

    function showSolution(str) {
      document.getElementById("solutionout").innerHTML = (str.indexOf("No ") == 0) ? str : ("Solution optimale : " + str);
    }

    function adjustAccuracy() {
      var inAcc = parseInt(document.getElementById("accuracyDig").value);
      if ((inAcc <= 0) || (inAcc > 13) || (isNaN(inAcc))) {
        alert("La précision doit être un entier entre 1 et 13");
        document.getElementById("accuracyDig").value = 6;
      } else lp_demo_accuracy = inAcc;
    }

    function setMode() {
      lp_demo_mode = parseInt(document.querySelector('input[name="modepicker"]:checked').id);
    }

    function setShowTabl() {
      var theId = document.querySelector('input[name="displaytabl"]:checked').id;
      switch (theId) {
        case "yesTabl": lp_demo_verboseLevel = lp_verbosity_tableaus; break;
        case "andSolns": lp_demo_verboseLevel = lp_verbosity_solutions; break;
        default: lp_demo_verboseLevel = lp_verbosity_none; break;
      }
    }

    function solveLP() {
      clearOutput();
      adjustAccuracy();
      setMode();
      setShowTabl();
      try {
        var Q = new lpProblem(document.getElementById('inputarea').value);
        Q.mode = lp_demo_mode;
        Q.sigDigits = lp_demo_accuracy;
        lp_verboseLevel = lp_demo_verboseLevel;
        Q.solve();
        showOutput(lp_trace_string);
        showSolution(Q.solutionToString());
      } catch (e) {
        showSolution("Erreur : " + e.message);
      }
    }
  </script>
</body>
</html>
